{{ define "content" }}
<div class="card">
	<div class="card-header">
		<div class="card-title">Account Information</div>
	</div>
	<div class="card-content">
		<form action="/dashboard/profile/update" method="POST">
			<div class="form-group">
				<label for="name" class="form-label">Full Name</label>
				<input type="text" id="name" name="name" class="form-input" value="{{ .profile.name }}" required>
			</div>
			<div class="form-group">
				<label for="email" class="form-label">Email Address</label>
				<input type="email" id="email" name="email" class="form-input" value="{{ .profile.email }}" required>
			</div>
			<div class="form-group">
				<label for="company" class="form-label">Company (Optional)</label>
				<input type="text" id="company" name="company" class="form-input" value="{{ .profile.company }}">
			</div>
			<button type="submit" class="btn">Save Changes</button>
		</form>
	</div>
</div>

<div class="card">
	<div class="card-header">
		<div class="card-title">Change Password</div>
	</div>
	<div class="card-content">
		<form action="/dashboard/profile/password" method="POST">
			<div class="form-group">
				<label for="current_password" class="form-label">Current Password</label>
				<input type="password" id="current_password" name="current_password" class="form-input" required>
			</div>
			<div class="form-group">
				<label for="new_password" class="form-label">New Password</label>
				<input type="password" id="new_password" name="new_password" class="form-input" required>
			</div>
			<div class="form-group">
				<label for="confirm_password" class="form-label">Confirm New Password</label>
				<input type="password" id="confirm_password" name="confirm_password" class="form-input" required>
			</div>
			<button type="submit" class="btn">Update Password</button>
		</form>
	</div>
</div>

<div class="card">
	<div class="card-header">
		<div class="card-title">API Keys</div>
	</div>
	<div class="card-content">
		<div class="table-container">
			<table>
				<thead>
					<tr>
						<th>Key Name</th>
						<th>Created</th>
						<th>Last Used</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					{{ range .profile.apiKeys }}
					<tr>
						<td>{{ .Name }}</td>
						<td>{{ .CreatedAt.Format "Jan 2, 2006" }}</td>
						<td>{{ if .LastUsed }}{{ .LastUsed.Format "Jan 2, 2006" }}{{ else }}Never{{ end }}</td>
						<td>
							<a href="#" style="color: #e12d39; font-size: 13px;">Revoke</a>
						</td>
					</tr>
					{{ end }}
				</tbody>
			</table>
		</div>
		
		<div style="margin-top: 20px;">
			<button class="btn">
				<i class="fas fa-plus"></i> Generate New API Key
			</button>
		</div>
	</div>
</div>

<div class="card">
	<div class="card-header">
		<div class="card-title">Notification Settings</div>
	</div>
	<div class="card-content">
		<form action="/dashboard/profile/notifications" method="POST">
			<div style="margin-bottom: 15px;">
				<div style="display: flex; align-items: center; margin-bottom: 10px;">
					<input type="checkbox" id="notify_task_failure" name="notify_task_failure" {{ if .profile.notifications.taskFailure }}checked{{ end }}>
					<label for="notify_task_failure" style="margin-left: 10px; font-size: 14px;">Email me when a task fails</label>
				</div>
				<div style="display: flex; align-items: center; margin-bottom: 10px;">
					<input type="checkbox" id="notify_billing" name="notify_billing" {{ if .profile.notifications.billing }}checked{{ end }}>
					<label for="notify_billing" style="margin-left: 10px; font-size: 14px;">Email me about billing updates</label>
				</div>
				<div style="display: flex; align-items: center;">
					<input type="checkbox" id="notify_news" name="notify_news" {{ if .profile.notifications.news }}checked{{ end }}>
					<label for="notify_news" style="margin-left: 10px; font-size: 14px;">Email me about product updates and news</label>
				</div>
			</div>
			<button type="submit" class="btn">Save Preferences</button>
		</form>
	</div>
</div>

<div class="card">
	<div class="card-header">
		<div class="card-title">Danger Zone</div>
	</div>
	<div class="card-content">
		<p style="margin-bottom: 15px; color: #555;">Once you delete your account, there is no going back. Please be certain.</p>
		<button class="btn" style="background-color: #e12d39;">Delete Account</button>
	</div>
</div>
{{ end }}
