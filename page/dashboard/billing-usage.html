{{ define "content" }}
<div class="card">
	<div class="card-header">
		<div class="card-title">Current Plan</div>
	</div>
	<div class="card-content">
		<div class="flex space-between items-center">
			<div>
				<h3 style="font-size: 18px; margin-bottom: 5px;">{{ .billing.planName }}</h3>
				<p style="color: #666; font-size: 14px;">{{ .billing.planDescription }}</p>
			</div>
			<div>
				<button class="btn">Upgrade Plan</button>
			</div>
		</div>
		
		<div style="margin-top: 20px;">
			<div class="section-label">Usage This Month</div>
			<div style="height: 8px; background-color: #eee; border-radius: 4px; margin-top: 8px; overflow: hidden;">
				<div style="height: 100%; width: {{ .billing.usagePercentage }}%; background-color: #3182ce;"></div>
			</div>
			<div class="flex space-between" style="margin-top: 5px; font-size: 13px;">
				<span>{{ .billing.usedTasks }} tasks</span>
				<span>{{ .billing.totalTasks }} tasks</span>
			</div>
		</div>
	</div>
</div>

<div class="card">
	<div class="card-header">
		<div class="card-title">Billing History</div>
	</div>
	<div class="table-container">
		<table>
			<thead>
				<tr>
					<th>Date</th>
					<th>Description</th>
					<th>Amount</th>
					<th>Status</th>
				</tr>
			</thead>
			<tbody>
				{{ range .billing.history }}
				<tr>
					<td>{{ .Date.Format "Jan 2, 2006" }}</td>
					<td>{{ .Description }}</td>
					<td>${{ .Amount }}</td>
					<td>
						<span class="badge {{ if eq .Status "paid" }}badge-success{{ else }}badge-warning{{ end }}">
							{{ .Status }}
						</span>
					</td>
				</tr>
				{{ end }}
			</tbody>
		</table>
	</div>
</div>

<div class="card">
	<div class="card-header">
		<div class="card-title">Payment Methods</div>
	</div>
	<div class="card-content">
		{{ range .billing.paymentMethods }}
		<div style="padding: 15px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
			<div class="flex gap-8 items-center">
				<i class="fas {{ if eq .Type "visa" }}fa-cc-visa{{ else if eq .Type "mastercard" }}fa-cc-mastercard{{ else }}fa-credit-card{{ end }}" style="font-size: 24px;"></i>
				<div>
					<div style="font-weight: 500;">{{ .Name }}</div>
					<div style="font-size: 13px; color: #666;">**** **** **** {{ .Last4 }}</div>
				</div>
			</div>
			<div>
				{{ if .Default }}
				<span class="badge badge-success">Default</span>
				{{ else }}
				<button class="btn btn-secondary" style="font-size: 12px; padding: 4px 8px;">Set Default</button>
				{{ end }}
			</div>
		</div>
		{{ end }}
		
		<div style="margin-top: 20px;">
			<button class="btn">
				<i class="fas fa-plus"></i> Add Payment Method
			</button>
		</div>
	</div>
</div>
{{ end }}
