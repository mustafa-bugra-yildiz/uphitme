{{ define "title" }}
	Profile
{{ end }}

{{ define "tab" }}
<!-- Account Information Section -->
<div class="bg-white shadow rounded-lg overflow-hidden mb-6">
	<div class="bg-gray-100 p-4">
		<div class="text-lg font-semibold">Account Information</div>
	</div>
	<div class="p-4">
		<form action="/dashboard/profile/update" method="POST">
			<div class="mb-4">
				<label for="name" class="block text-sm font-medium text-gray-700">Full Name</label>
				<input type="text" id="name" name="name" class="mt-1 p-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="{{ .profile.name }}" required>
			</div>
			<div class="mb-4">
				<label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
				<input type="email" id="email" name="email" class="mt-1 p-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="{{ .profile.email }}" required>
			</div>
			<div class="mb-4">
				<label for="company" class="block text-sm font-medium text-gray-700">Company (Optional)</label>
				<input type="text" id="company" name="company" class="mt-1 p-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="{{ .profile.company }}">
			</div>
			<button type="submit" class="w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">Save Changes</button>
		</form>
	</div>
</div>

<!-- Change Password Section -->
<div class="bg-white shadow rounded-lg overflow-hidden mb-6">
	<div class="bg-gray-100 p-4">
		<div class="text-lg font-semibold">Change Password</div>
	</div>
	<div class="p-4">
		<form action="/dashboard/profile/password" method="POST">
			<div class="mb-4">
				<label for="current_password" class="block text-sm font-medium text-gray-700">Current Password</label>
				<input type="password" id="current_password" name="current_password" class="mt-1 p-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
			</div>
			<div class="mb-4">
				<label for="new_password" class="block text-sm font-medium text-gray-700">New Password</label>
				<input type="password" id="new_password" name="new_password" class="mt-1 p-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
			</div>
			<div class="mb-4">
				<label for="confirm_password" class="block text-sm font-medium text-gray-700">Confirm New Password</label>
				<input type="password" id="confirm_password" name="confirm_password" class="mt-1 p-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
			</div>
			<button type="submit" class="w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">Update Password</button>
		</form>
	</div>
</div>

<!-- API Keys Section -->
<div class="bg-white shadow rounded-lg overflow-hidden mb-6">
	<div class="bg-gray-100 p-4">
		<div class="text-lg font-semibold">API Keys</div>
	</div>
	<div class="p-4">
		<div class="overflow-x-auto">
			<table class="min-w-full table-auto">
				<thead>
					<tr>
						<th class="px-4 py-2 text-left">Key Name</th>
						<th class="px-4 py-2 text-left">Created</th>
						<th class="px-4 py-2 text-left">Last Used</th>
						<th class="px-4 py-2 text-left">Actions</th>
					</tr>
				</thead>
				<tbody>
					{{ range .profile.apiKeys }}
					<tr>
						<td class="px-4 py-2">{{ .Name }}</td>
						<td class="px-4 py-2">{{ .CreatedAt.Format "Jan 2, 2006" }}</td>
						<td class="px-4 py-2">{{ if .LastUsed }}{{ .LastUsed.Format "Jan 2, 2006" }}{{ else }}Never{{ end }}</td>
						<td class="px-4 py-2">
							<a href="#" class="text-red-600 text-sm">Revoke</a>
						</td>
					</tr>
					{{ end }}
				</tbody>
			</table>
		</div>
		<div class="mt-6">
			<button class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500">
				<i class="fas fa-plus mr-2"></i> Generate New API Key
			</button>
		</div>
	</div>
</div>

<!-- Notification Settings Section -->
<div class="bg-white shadow rounded-lg overflow-hidden mb-6">
	<div class="bg-gray-100 p-4">
		<div class="text-lg font-semibold">Notification Settings</div>
	</div>
	<div class="p-4">
		<form action="/dashboard/profile/notifications" method="POST">
			<div class="mb-4 space-y-4">
				<div class="flex items-center">
					<input type="checkbox" id="notify_task_failure" name="notify_task_failure" class="form-checkbox h-5 w-5 text-blue-600" {{ if .profile.notifications.taskFailure }}checked{{ end }}>
					<label for="notify_task_failure" class="ml-2 text-sm">Email me when a task fails</label>
				</div>
				<div class="flex items-center">
					<input type="checkbox" id="notify_billing" name="notify_billing" class="form-checkbox h-5 w-5 text-blue-600" {{ if .profile.notifications.billing }}checked{{ end }}>
					<label for="notify_billing" class="ml-2 text-sm">Email me about billing updates</label>
				</div>
				<div class="flex items-center">
					<input type="checkbox" id="notify_news" name="notify_news" class="form-checkbox h-5 w-5 text-blue-600" {{ if .profile.notifications.news }}checked{{ end }}>
					<label for="notify_news" class="ml-2 text-sm">Email me about product updates and news</label>
				</div>
			</div>
			<button type="submit" class="w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">Save Preferences</button>
		</form>
	</div>
</div>

<!-- Danger Zone Section -->
<div class="bg-white shadow rounded-lg overflow-hidden mb-6">
	<div class="bg-gray-100 p-4">
		<div class="text-lg font-semibold">Danger Zone</div>
	</div>
	<div class="p-4">
		<p class="mb-4 text-gray-600">Once you delete your account, there is no going back. Please be certain.</p>
		<button class="w-full px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500">Delete Account</button>
	</div>
</div>
{{ end }}
